define("app/ui/permalink_keyboard_support",["module","require","exports","core/component","app/ui/with_block_kb_shortcut_helpers","app/ui/with_focus_highlight"],function(module, require, exports) {
function permalinkKeyboard(){this.defaultAttrs({permalinkOverlay:".PermalinkOverlay",permalinkOverlayTweetSelector:".ThreadedPermalinkOverlay-focalTweet .tweet",permalinkPageTweetSelector:".route-permalink .permalink-tweet",ownTweetSelector:".my-tweet"}),this.getNode=function(){return this.select("permalinkOverlay").is(":visible")?this.select("permalinkOverlayTweetSelector"):this.select("permalinkPageTweetSelector")},this.triggerBlock=function(){this.triggerBlockActionOnNode(this.getNode(),"uiOpenBlockUserDialog")},this.triggerMute=function(){this.triggerBlockActionOnNode(this.getNode(),"uiDidMuteUser")},this.after("initialize",function(){this.on(document,"uiShortcutBlock",this.triggerBlock),this.on(document,"uiShortcutMuteUser",this.triggerMute)})}var defineComponent=require("core/component"),withBlockKBShortcutHelpers=require("app/ui/with_block_kb_shortcut_helpers"),withFocusHighlight=require("app/ui/with_focus_highlight");module.exports=defineComponent(permalinkKeyboard,withBlockKBShortcutHelpers,withFocusHighlight)
});
define("app/ui/hidden_ancestors",["module","require","exports","core/component","app/utils/chrome"],function(module, require, exports) {
function hiddenAncestors(){this.defaultAttrs({ancestorAdjustmentClass:"multiple-ancestors-adjustment",doBottomPaddingAdjustment:!0,focalTweetTopPadding:125,permalinkOverlayDistanceFromTopOfPage:64,ancestorTweetsSelector:".ancestor",focalTweetSelector:".permalink-tweet-container",pageContainerSelector:"#page-container",windowSelector:window,documentSelector:document}),this.showHiddenAncestors=function(){var a=this.select("ancestorTweetsSelector"),b=$(this.attr.windowSelector);if(!a.length)return;$("body").removeClass(this.attr.ancestorAdjustmentClass);var c=this.getTopOffset($(this.attr.focalTweetSelector));if(this.attr.doBottomPaddingAdjustment){var d=c+this.attr.focalTweetTopPadding-$(this.attr.documentSelector).height()+b.height();$(this.attr.pageContainerSelector).css("padding-bottom",d)}b.scrollTop(c-this.attr.focalTweetTopPadding)},this.getTopOffset=function(a){return this.attr.windowSelector==window?chrome.getCanvasYOffset(a)-1:a.position().top+this.attr.permalinkOverlayDistanceFromTopOfPage},this.after("initialize",function(){this.on(document,"uiOverlayPageChanged uiPageChanged uiSwiftLoaded",this.showHiddenAncestors)})}var defineComponent=require("core/component"),chrome=require("app/utils/chrome");module.exports=defineComponent(hiddenAncestors)
});
define("app/ui/hidden_descendants",["module","require","exports","core/component"],function(module, require, exports) {
function hiddenDescendants(){this.defaultAttrs({repliesSelector:".replies-to .stream-items .tweet",hasRepliesClass:"has-replies"}),this.updateRepliesState=function(){var a=this.select("repliesSelector");a.length?this.$node.addClass(this.attr.hasRepliesClass):this.$node.removeClass(this.attr.hasRepliesClass)},this.after("initialize",function(){this.on(document,"uiTweetInserted uiTweetRemoved",this.updateRepliesState)})}var defineComponent=require("core/component");module.exports=defineComponent(hiddenDescendants)
});
define("app/ui/dialogs/sms_codes",["module","require","exports","core/component","app/ui/with_dialog"],function(module, require, exports) {
function smsCodesDialog(){this.defaultAttrs({dialogSelector:"#sms-codes-dialog",triggerSelector:".sms-codes-link"}),this.after("initialize",function(){this.$dialog=this.select("dialogSelector")})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),SMSCodesDialog=defineComponent(smsCodesDialog,withDialog);module.exports=SMSCodesDialog
});
define("app/ui/permalink_tweet",["module","require","exports","core/component"],function(module, require, exports) {
function permalinkTweet(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet",permalinkTweetForm:".permalink-tweet-container + .inline-reply-tweetbox .tweet-form"}),this.homePath="/",this.expandTweetBox=function(a,b){var c=$(a.target);c.is(this.attr.permalinkTweetSelector)&&this.trigger(this.select("permalinkTweetForm"),"uiTweetBoxExpand",b)},this.redirectHome=function(a,b){var c=this.$node.find('[data-tweet-id="'+b.sourceEventData.id+'"]');c.is(this.attr.permalinkTweetSelector)&&window.location.replace(this.homePath)},this.after("initialize",function(){if(!this.attr.loggedIn)return;this.on("uiReplyToTweet",this.expandTweetBox),this.on(document,"dataDidDeleteTweet",this.redirectHome)})}var component=require("core/component"),PermalinkTweet=component(permalinkTweet);module.exports=PermalinkTweet
});
define("app/ui/timelines/conversations/descendant_timeline",["module","require","exports","core/component","app/ui/timelines/base_timeline","app/ui/timelines/with_old_items","app/ui/timelines/with_min_max_pagination","app/ui/with_item_actions","app/utils/string","app/ui/gallery/with_gallery"],function(module, require, exports) {
function descendantTimeline(){this.defaultAttrs({itemType:"tweet",tweetSelector:".tweet",hiddenRepliesContainerSelector:".hidden-replies-container",simpleTweetSelector:".js-simple-tweet",descendantTweetSelector:".tweet.descendant",threadedConversationClass:"ThreadedConversation--loneTweet ThreadedConversation--ownReply"}),this.injectThreadedReply=function(a){a.wrap("<div class='"+this.attr.threadedConversationClass+"'></div>"),this.$repliesContainer.prepend(a.parent())},this.injectOwnReply=function(a,b){if(this.attr.tweetId!==b.in_reply_to_status_id)return;var c=$(b.tweet_html);this.attr.isThreaded?this.injectThreadedReply(c):(this.reachedTheEnd()?this.$repliesContainer:this.$hiddenRepliesContainer).append(c),this.$node.removeClass("hidden"),this.trigger("uiTweetInserted",b),this.trigger(c.find(this.attr.tweetSelector),"uiHasInjectedTimelineItem")},this.restoreHiddenReplies=function(a,b){this.$hiddenRepliesContainer.children().each(function(a,b){var c=$(b),d=c.find(this.attr.tweetSelector).attr("data-tweet-id");this.$repliesContainer.children().each(function(a,b){var e=$(b),f=e.find(this.attr.tweetSelector).attr("data-tweet-id"),g=stringUtils.compare(d,f);if(g===0)return c.remove(),!1;if(g<0)return c.insertBefore(e),!1}.bind(this))}.bind(this)),this.reachedTheEnd()&&(this.$repliesContainer.append(this.$hiddenRepliesContainer.html()),this.$hiddenRepliesContainer.html(""))},this.reachedTheEnd=function(){return!this.select("timelineEndSelector").hasClass("has-more-items")},this.hideReplies=function(a,b){!this.select("simpleTweetSelector").length&&!this.select("descendantTweetSelector").length&&this.$node.addClass("hidden")},this.after("initialize",function(){this.$repliesContainer=this.select("itemsSelector"),this.$hiddenRepliesContainer=this.select("hiddenRepliesContainerSelector"),this.on("uiTweetRemoved",this.hideReplies),this.on(document,"dataTweetSuccess",this.injectOwnReply),this.on("uiHasInjectedOldTimelineItems",this.restoreHiddenReplies)})}var defineComponent=require("core/component"),BaseTimeline=require("app/ui/timelines/base_timeline"),withOldItems=require("app/ui/timelines/with_old_items"),withMinMaxPagination=require("app/ui/timelines/with_min_max_pagination"),withItemActions=require("app/ui/with_item_actions"),stringUtils=require("app/utils/string"),withGallery=require("app/ui/gallery/with_gallery");module.exports=BaseTimeline.mixin(descendantTimeline,withOldItems,withMinMaxPagination,withItemActions,withGallery)
});
define("app/ui/timelines/with_simple_new_items",["module","require","exports"],function(module, require, exports) {
function withSimpleNewItems(){this.defaultAttrs({endOfStreamSelector:".stream-footer",errorMessageSelector:".stream-fail-container",tryAgainSelector:".try-again-after-whale"}),this.getNewItems=function(a){a&&a.stopPropagation(),this.shouldGetNewItems()&&this.trigger("uiWantsMoreTimelineItems",this.getNewItemsData())},this.notifyNewItems=function(a,b){this.injectNewItems(a,b)},this.injectNewItems=function(a){this.resetStateVariables(a);if(!a.items_html.trim())return;var b=this.$document.height();this.injectItems("prepend",a.items_html,"uiHasInjectedNewTimelineItems"),this.$window.scrollTop(this.$document.height()-b),a.has_more_items||this.select("endOfStreamSelector").remove()},this.notifyNewItemsError=function(a){},this.after("initialize",function(){var a=this.attr.inOverlay?".PermalinkOverlay":window;this.on(a,"uiNearTheTop",this.getNewItems),this.$document=$(document),this.$window=$(window),this.on("click",{tryAgainSelector:this.tryAgainAfterWhale})})}module.exports=withSimpleNewItems
});
define("app/ui/timelines/conversations/ancestor_timeline",["module","require","exports","core/component","app/ui/timelines/base_timeline","app/ui/timelines/with_simple_new_items","app/ui/timelines/with_min_max_pagination","app/ui/with_item_actions","app/ui/gallery/with_gallery"],function(module, require, exports) {
function ancestorTimeline(){this.defaultAttrs({itemType:"tweet",tweetSelector:".tweet",simpleTweetSelector:".js-simple-tweet"}),this.removeAncestors=function(){this.select("simpleTweetSelector").length||this.$node.remove()},this.after("initialize",function(){this.on("uiTweetRemoved",this.removeAncestors)})}var defineComponent=require("core/component"),BaseTimeline=require("app/ui/timelines/base_timeline"),withSimpleNewItems=require("app/ui/timelines/with_simple_new_items"),withMinMaxPagination=require("app/ui/timelines/with_min_max_pagination"),withItemActions=require("app/ui/with_item_actions"),withGallery=require("app/ui/gallery/with_gallery");module.exports=BaseTimeline.mixin(ancestorTimeline,withSimpleNewItems,withMinMaxPagination,withItemActions,withGallery)
});
define("app/ui/timelines/conversations/permalink_promoted_timeline",["module","require","exports","core/component","app/ui/timelines/base_timeline","app/ui/with_item_actions","app/ui/with_user_actions","app/ui/timelines/with_dismissible_promoted_tweets"],function(module, require, exports) {
function permalinkPromotedTimeline(){this.defaultAttrs({itemType:"tweet",permalinkPromotedTweetSelector:".suggested-tweet-stream-container .tweet",simpleTweetSelector:".js-simple-tweet",tweetSelector:".tweet",suggestedContainerSelector:".suggested-tweet-stream-container",suggestedItemsSelector:".suggested-tweet-stream-items"}),this.injectConversationSuggestions=function(a,b){if(b.suggested_item_html&&b.suggested_item_html.length>0){var c=$(this.attr.suggestedContainerSelector),d=c.find(this.attr.suggestedItemsSelector),e=b.suggested_item_html.trim();d.children()&&d.children().length==0&&e.length>0&&(d.append($(e)),c.removeClass("u-hidden"),this.trigger("uiHasInjectedNewTimeline"))}else b.descendants&&this.trigger(a.target,"dataGotMoreTimelineItems",b.descendants)},this.after("initialize",function(a){this.on(document,"dataGotMoreTimelineItems",this.injectConversationSuggestions)})}var component=require("core/component"),BaseTimeline=require("app/ui/timelines/base_timeline"),withItemActions=require("app/ui/with_item_actions"),withUserActions=require("app/ui/with_user_actions"),withDismissiblePromotedTweets=require("app/ui/timelines/with_dismissible_promoted_tweets"),PermalinkPromotedTimeline=BaseTimeline.mixin(permalinkPromotedTimeline,withItemActions,withUserActions,withDismissiblePromotedTweets);module.exports=PermalinkPromotedTimeline
});
define("app/ui/with_permalinktweet_tweet_actions",["module","require","exports"],function(module, require, exports) {
function withPermalinkTweetTweetActions(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet",ownTweetSelector:".my-tweet",permalinkOverlaySelector:".PermalinkOverlay .permalink-container"}),this.getPermalinkTweet=function(a,b,c){var d=this.select("permalinkTweetSelector"),e=!!d.length;return e&&(c.$tweet=d),e},this.isNotMyTweet=function(a,b,c){return!c.$tweet.is(this.attr.ownTweetSelector)},this.shouldHandleTweetAction=function(){return this.attr.inOverlay||!$(this.attr.permalinkOverlaySelector).length},this.after("initialize",function(){if(!this.attr.loggedIn)return;var a=this.mkTweetDataCollectorForAction(this.interactionDataWithCard),b=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.on(document,"uiShortcutFavorite",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,a,this.toggleFavorite)),this.on(document,"uiShortcutRetweet",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,this.isNotMyTweet,a,this.toggleRetweet)),this.on(document,"uiShortcutReply",this.composeHandler(this.shouldHandleTweetAction,this.getPermalinkTweet,b,this.triggerTweetAction("uiReplyToTweet")))})}module.exports=withPermalinkTweetTweetActions
});
define("app/ui/with_inline_reply",["module","require","exports"],function(module, require, exports) {
function withInlineReply(){this.after("initialize",function(){this.on("uiReplyToTweet","expandTweetByReply")})}module.exports=withInlineReply
});
define("app/ui/timelines/overlay_tweet_visibility",["module","require","exports"],function(module, require, exports) {
function overlayTweetVisibility(){this.defaultAttrs({overlaySelector:".PermalinkOverlay .tweet"}),this.overlayOpen=function(){this.attr.tweetSelector=this.attr.overlaySelector},this.overlayClosed=function(){this.attr.tweetSelector=this.attr.mainSelector},this.after("initialize",function(){this.on(document,"uiOverlayOpen",this.overlayOpen),this.on(document,"uiOverlayClosed",this.overlayClosed),this.attr.mainSelector=this.attr.tweetSelector})}module.exports=overlayTweetVisibility
});
define("app/data/permalink_scribe",["module","require","exports","core/component","app/data/with_interaction_data_scribe","app/data/with_card_metadata"],function(module, require, exports) {
function permalinkScribe(){this.defaultAttrs({permalinkTweetSelector:".permalink-tweet"}),this.scribePermalinkImpression=function(){var a=this.select("permalinkTweetSelector"),b=this.getCardDataFromTweet(a);b.tweetHasCard&&this.scribeCardInteraction("show",b)},this.after("initialize",function(){this.scribePermalinkImpression()})}var defineComponent=require("core/component"),withInteractionDataScribe=require("app/data/with_interaction_data_scribe"),withCardMetadata=require("app/data/with_card_metadata");module.exports=defineComponent(permalinkScribe,withInteractionDataScribe,withCardMetadata)
});
define("app/ui/dialogs/permalink_profile_overlay",["module","require","exports","core/component"],function(module, require, exports) {
function PermalinkProfileOverlay(){this.defaultAttrs({permalinkCloseButtonSelector:".PermalinkProfile-dismiss",profileBackgroundCloseSelector:".PermalinkProfile-overlay",tweetArrowPreviousSelector:".TweetArrow-previous",tweetArrowNextSelector:".TweetArrow-next"}),this.handlePermalinkCloseButton=function(a){this.trigger("uiTweetArrowDismiss"),this.$node.fadeOut()},this.handleTweetArrowPreviousButton=function(a){this.trigger("uiTweetArrowPrevious")},this.handleTweetArrowNextButton=function(a){this.trigger("uiTweetArrowNext")},this.handleOverlayClick=function(a){this.trigger("uiTweetArrowBackgroundDismiss"),this.$node.fadeOut()},this.after("initialize",function(){this.$node.show().css("opacity","1"),this.on($(this.attr.profileBackgroundCloseSelector),"click",this.handleOverlayClick),this.on("click",{permalinkCloseButtonSelector:this.handlePermalinkCloseButton,tweetArrowPreviousSelector:this.handleTweetArrowPreviousButton,tweetArrowNextSelector:this.handleTweetArrowNextButton})})}var defineComponent=require("core/component");module.exports=defineComponent(PermalinkProfileOverlay)
});
define("app/data/permalink_profile_overlay_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function permalinkProfileOverlayScribe(){this.defaultAttrs({dialogComponentName:"dialog"}),this.namespace=function(a,b,c){return{component:a,element:b,action:c}},this.after("initialize",function(){this.scribeOnEvent("uiTweetArrowPrevious",this.namespace(this.attr.dialogComponentName,"previous","click")),this.scribeOnEvent("uiTweetArrowNext",this.namespace(this.attr.dialogComponentName,"next","click")),this.scribeOnEvent("uiTweetArrowDismiss",this.namespace(this.attr.dialogComponentName,"dismiss","dismiss")),this.scribeOnEvent("uiTweetArrowBackgroundDismiss",this.namespace(this.attr.dialogComponentName,"background","dismiss")),this.scribeOnEvent("uiPermalinkGalleryOpen",this.namespace(null,"gallery","open"))})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(permalinkProfileOverlayScribe,withScribe)
});
define("app/boot/permalink_profile_overlay",["module","require","exports","app/ui/dialogs/permalink_profile_overlay","app/data/permalink_profile_overlay_scribe"],function(module, require, exports) {
function initialize(a){PermalinkProfileOverlayScribe.attachTo(document),PermalinkProfileOverlay.attachTo(".permalink-container")}var PermalinkProfileOverlay=require("app/ui/dialogs/permalink_profile_overlay"),PermalinkProfileOverlayScribe=require("app/data/permalink_profile_overlay_scribe"),hasOverlay=$(".PermalinkProfile-overlay").length>0;module.exports=hasOverlay?initialize:$.noop
});
define("app/ui/threaded_permalink_actions",["module","require","exports","app/ui/expando/expando_helpers","core/component","app/utils/scale_animation_time","core/utils","app/ui/with_interaction_data","core/i18n"],function(module, require, exports) {
function threadedPermalinkActions(a){this.defaultAttrs({moduleSelector:".ThreadedConversation",viewOtherSelector:".ThreadedConversation-viewOther",viewOtherLinkSelector:".ThreadedConversation-viewOther a",showMoreSelector:".ThreadedConversation-showMore",showMoreLinkSelector:".ThreadedConversation-showMore a",tweetSelector:".tweet",threadedTweetSelector:".ThreadedConversation-tweet"}),this.openOverlay=function(a,b){a.preventDefault();var c=$(a.target);this.trigger("uiOverlayNavigate",{href:c.attr("href"),hostName:c.prop("hostname")});var d=c.closest(this.attr.viewOtherSelector).prev().find(this.attr.tweetSelector),e={scribeContext:this.getScribeContext(c),tweet:this.tweetData(d)};this.trigger("uiViewOtherClicked",e)},this.expandModule=function(a){a.preventDefault();var b=$(a.target),c=b.closest(this.attr.moduleSelector).find(this.attr.tweetSelector).toArray(),d={scribeContext:this.getScribeContext(b),tweets:c.map(this.tweetData,this)};this.trigger("uiShowMoreClicked",d);var e=b.closest(this.attr.showMoreSelector),f=e.data("expansion-url");b.addClass("u-hiddenVisually"),e.find(".show-more-spinner").removeClass("u-hiddenVisually"),this.trigger(e,"uiNeedsThreadedConversationTweets",{url:f})},this.tweetData=function(a){return{id:$(a).data("tweetId"),position:this.select("tweetSelector").index(a)}},this.removeLastItemClasses=function(a,b){var c=a.find(this.attr.threadedTweetSelector).last();c.removeClass("last");var d=c.next(this.attr.viewOtherSelector);d&&(d.remove(),d.removeClass("u-hiddenVisually last"),b.prepend(d))},this.animateResult=function(a,b,c){var d=b.find(".stream-items");this.removeLastItemClasses(b,c),d.children().addClass("opaque"),b.addClass("animating");var e=function(){d.children().removeClass("opaque"),b.removeClass("animating"),this.trigger(d,"uiPermalinkThreadExpanded")}.bind(this),f=c.children();d.append(f);var g=Math.max(this.getCombinedHeight(f)-a,0),h=f.first();h.css({marginTop:-g});var i=this.animationTime(g);h.animate({marginTop:0},{duration:i,queue:!1,complete:e})},this.expansionResult=function(a,b){var c=$(a.target),d=c.closest(this.attr.moduleSelector),e=this.getCombinedHeight(c);c.remove();var f=$(b.conversation_html).find(".stream-items");f.children().length&&this.animateResult(e,d,f),$(document).trigger("loadImages")},this.getCombinedHeight=function(a){return a.toArray().reduce(function(a,b){return a+$(b).outerHeight()},0)},this.animationTime=function(a){var b=expandoHelpers.guessGoodSpeed(a)*2;return scaleAnimationTime(b)},this.expansionFailure=function(a){var b=$(a.target);b.find(".show-more-spinner").addClass("u-hiddenVisually"),b.find(".show-more-link").removeClass("u-hiddenVisually"),this.trigger("uiShowMessage",{message:_('Whoops! Something went wrong. Please try again!')})},this.after("initialize",function(){this.attr.isThreaded&&(this.on("click",{viewOtherLinkSelector:this.openOverlay,showMoreLinkSelector:this.expandModule}),this.on("dataThreadedConversationResult",this.expansionResult),this.on("dataThreadedConversationError",this.expansionFailure))})}var expandoHelpers=require("app/ui/expando/expando_helpers"),defineComponent=require("core/component"),scaleAnimationTime=require("app/utils/scale_animation_time"),utils=require("core/utils"),withInteractionData=require("app/ui/with_interaction_data"),_=require("core/i18n");module.exports=defineComponent(threadedPermalinkActions,withInteractionData)
});
define("app/data/threaded_permalink_actions_scribe",["module","require","exports","core/component","app/utils/scribe_item_types","app/data/with_scribe"],function(module, require, exports) {
function threadedPermalinkActionsScribe(){this.scribeViewOtherClick=function(a,b){this.scribe("click",b,this.tweetScribeItems([b.tweet]))},this.scribeShowMoreClick=function(a,b){this.scribe("click",b,this.tweetScribeItems(b.tweets))},this.tweetScribeItems=function(a){return{items:a.map(function(a){return{id:a.id,position:a.position,item_type:scribeItemTypes.tweet}})}},this.after("initialize",function(){this.on("uiViewOtherClicked",this.scribeViewOtherClick),this.on("uiShowMoreClicked",this.scribeShowMoreClick)})}var defineComponent=require("core/component"),scribeItemTypes=require("app/utils/scribe_item_types"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(threadedPermalinkActionsScribe,withScribe)
});
define("app/data/threaded_conversations",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function threadedConversations(){this.defaultAttrs({statsName:"threaded_conversation_expansion"}),this.requestTweets=function(a,b){if(!b.url)return;var c=function(b){this.trigger(a.target,"dataThreadedConversationResult",b)},d=function(b,c,d){this.trigger(a.target,"dataThreadedConversationError",{status:c,errorThrown:d})};this.get({url:b.url,eventData:b,success:c.bind(this),error:d.bind(this)})},this.after("initialize",function(){this.on("uiNeedsThreadedConversationTweets",this.requestTweets)})}var defineComponent=require("core/component"),withData=require("app/data/with_data"),ThreadedConversations=defineComponent(threadedConversations,withData);module.exports=ThreadedConversations
});
define("app/ui/timelines/with_overlay_timeline",["module","require","exports","core/utils"],function(module, require, exports) {
function withOverlayTimeline(){this.defaultAttrs({inOverlay:!1}),this.modifyItemsData=function(a){var b=a?a():{};return utils.merge(b,{headers:{"X-Overlay-Request":!0,"X-Previous-Page-Name":this.attr.pageName}})},this.after("initialize",function(){this.attr.inOverlay&&(this.around("getNewItemsData",this.modifyItemsData),this.around("getOldItemsData",this.modifyItemsData))})}var utils=require("core/utils");module.exports=withOverlayTimeline
});
define("app/pages/permalink",["module","require","exports","app/ui/permalink_keyboard_support","app/ui/hidden_ancestors","app/ui/hidden_descendants","app/ui/dialogs/sms_codes","app/ui/permalink_tweet","app/ui/timelines/conversations/descendant_timeline","app/ui/timelines/conversations/ancestor_timeline","app/ui/timelines/conversations/permalink_promoted_timeline","app/boot/logged_out","app/boot/timeline","app/boot/tweets","app/ui/tweet_actions","app/ui/profile/highline_tweet_stats","app/ui/with_permalinktweet_tweet_actions","app/ui/with_tweet_translation","app/ui/with_inline_reply","app/ui/with_dismiss_tweet","app/ui/tweets","app/ui/timelines/overlay_tweet_visibility","app/ui/timelines/tweet_visibility","app/data/tweet_visibility_scribe","core/utils","app/boot/app","app/data/permalink_scribe","app/utils/tweet_helper","app/boot/trends","app/ui/more_tweet_actions_dropdown","app/ui/multiline_ellipses","app/boot/permalink_profile_overlay","app/boot/permalink_overlay","app/ui/threaded_permalink_actions","app/data/threaded_permalink_actions_scribe","app/data/threaded_conversations","app/boot/related_tweets_siderail","app/boot/related_users","app/ui/navigation_links","app/ui/timelines/with_overlay_timeline","app/ui/dynamic_card_watcher"],function(module, require, exports) {
var PermalinkKeyboardSupport=require("app/ui/permalink_keyboard_support"),HiddenAncestors=require("app/ui/hidden_ancestors"),HiddenDescendants=require("app/ui/hidden_descendants"),SMSCodesDialog=require("app/ui/dialogs/sms_codes"),PermalinkTweet=require("app/ui/permalink_tweet"),DescendantTimeline=require("app/ui/timelines/conversations/descendant_timeline"),AncestorTimeline=require("app/ui/timelines/conversations/ancestor_timeline"),PermalinkPromotedTimeline=require("app/ui/timelines/conversations/permalink_promoted_timeline"),loggedOutBoot=require("app/boot/logged_out"),timelineBoot=require("app/boot/timeline"),tweetsBoot=require("app/boot/tweets"),TweetActionsUI=require("app/ui/tweet_actions"),HighlineTweetStats=require("app/ui/profile/highline_tweet_stats"),withPermalinkTweetTweetActions=require("app/ui/with_permalinktweet_tweet_actions"),withTweetTranslation=require("app/ui/with_tweet_translation"),withInlineReply=require("app/ui/with_inline_reply"),withDismissTweet=require("app/ui/with_dismiss_tweet"),Tweets=require("app/ui/tweets"),overlayTweetVisibility=require("app/ui/timelines/overlay_tweet_visibility"),TweetVisibility=require("app/ui/timelines/tweet_visibility"),TweetVisibilityScribe=require("app/data/tweet_visibility_scribe"),utils=require("core/utils"),bootApp=require("app/boot/app"),PermalinkScribe=require("app/data/permalink_scribe"),tweetHelper=require("app/utils/tweet_helper"),trends=require("app/boot/trends"),MoreTweetActionsDropdown=require("app/ui/more_tweet_actions_dropdown"),MultilineEllipses=require("app/ui/multiline_ellipses"),permalinkProfileOverlayBoot=require("app/boot/permalink_profile_overlay"),permalinkOverlayBoot=require("app/boot/permalink_overlay"),ThreadedPermalinkActions=require("app/ui/threaded_permalink_actions"),ThreadedPermalinkActionsScribe=require("app/data/threaded_permalink_actions_scribe"),ThreadedConversationsData=require("app/data/threaded_conversations"),RelatedTweetsBoot=require("app/boot/related_tweets_siderail"),RelatedUsersBoot=require("app/boot/related_users"),NavigationLinks=require("app/ui/navigation_links"),withOverlayTimeline=require("app/ui/timelines/with_overlay_timeline"),DynamicCardWatcher=require("app/ui/dynamic_card_watcher");module.exports=function(a){function i(b){return utils.merge(a,{eventData:{scribeContext:{component:b}},itemType:"tweet",lastItemSelector:".tweet:last",inOverlay:a.inOverlay,genericItemSelector:".js-stream-tweet",useDeduping:!0})}var b=a.inOverlay?".PermalinkOverlay":"#page-container.wrapper-permalink",c=b+" div.permalink-tweet-container",d=".suggested-tweet-stream-container",e="div.permalink-tweet",f=".permalink-replies .stream-container",g="tweet",h=".original-tweet";bootApp(a),loggedOutBoot(a),permalinkOverlayBoot(a),permalinkProfileOverlayBoot(a),MultilineEllipses.attachTo(document),tweetsBoot(b,utils.merge(a,{preexpandedTweetSelector:e,preexpandedOpenTweetSelector:e,generalTweetSelector:e,marginBreaking:!1})),a.inOverlay||(TweetVisibility.mixin(overlayTweetVisibility).attachTo(document,{tweetSelector:"#page-container.wrapper-permalink .tweet",eventData:a.eventData}),TweetVisibilityScribe.attachTo(document)),PermalinkKeyboardSupport.attachTo(document),PermalinkScribe.attachTo(document);var j,k,l=utils.merge(a,{statsName:"swift_permalink_timeline"});a.inOverlay?(l=utils.merge(l,{infiniteScrollNode:".PermalinkOverlay",contentSelector:".PermalinkOverlay-body .permalink-container"}),HiddenAncestors.attachTo("div.in-reply-to",{windowSelector:".PermalinkOverlay"})):HiddenAncestors.attachTo("div.in-reply-to"),timelineBoot(l),j=DescendantTimeline.mixin(withOverlayTimeline),k=AncestorTimeline.mixin(withOverlayTimeline),HiddenDescendants.attachTo(".permalink"),Tweets.attachTo(c,i(g)),Tweets.attachTo(f,i(g)),PermalinkTweet.attachTo(".permalink",i(g)),HighlineTweetStats.attachTo(document),TweetActionsUI.mixin.apply(this,[withTweetTranslation,withPermalinkTweetTweetActions]).attachTo(c,i(g)),MoreTweetActionsDropdown.attachTo(c,i(g)),k.attachTo(".in-reply-to",i("conversation")),TweetActionsUI.mixin(withTweetTranslation).attachTo(".in-reply-to",i("conversation")),MoreTweetActionsDropdown.attachTo(".in-reply-to",i("conversation")),j.attachTo(".replies-to",i("replies")),TweetActionsUI.mixin(withTweetTranslation).attachTo(".replies-to",i("replies")),MoreTweetActionsDropdown.attachTo(".replies-to",i("replies")),tweetsBoot(d,utils.merge(i("conversation-suggestions"),{preexpandedTweetSelector:h,preexpandedOpenTweetSelector:h,generalTweetSelector:h})),PermalinkPromotedTimeline.attachTo(d,i("conversation-suggestions"),{tweetContainerSelector:h,tweetWithReplyDialogSelector:h}),TweetActionsUI.mixin.apply(this,[withDismissTweet]).attachTo(d,i("conversation-suggestions")),MoreTweetActionsDropdown.attachTo(d,i("conversation-suggestions")),ThreadedPermalinkActions.attachTo(".replies-to",a),ThreadedPermalinkActionsScribe.attachTo(document),ThreadedConversationsData.attachTo(document),a.loggedIn?($(b).find(".inline-reply-tweetbox .tweet-form").trigger("uiInitTweetbox",{condensable:!0,preventTweetingDefaultText:!1,impressionId:a.impressionId,inReplyToStatusId:a.tweetId,videoSupport:!0,environment:a.environment,eventData:{scribeContext:{component:"inline_reply"}},inReplyToTweetData:{screenNames:tweetHelper.extractMentionsForReply($(e),a.screenName)}}),trends(utils.merge(a,{show_context:!1}))):SMSCodesDialog.attachTo("body"),NavigationLinks.attachTo(".TweetArrows, .PermalinkProfile-dismiss, .PermalinkProfile-overlay",{eventData:{scribeContext:{component:"dialog"}}}),RelatedUsersBoot(a),RelatedTweetsBoot(a),DynamicCardWatcher.attachTo(window,{containerSelector:".permalink-container",unloadedCardsFilter:'#ancestors [data-has-autoplayable-media="true"], .permalink-replies [data-has-autoplayable-media="true"]'})}
});
define("app/ui/threaded_permalink_tweet",["module","require","exports","core/component"],function(module, require, exports) {
function threadedPermalinkTweet(){this.defaultAttrs({permalinkTweetSelector:".ThreadedPermalinkOverlay-focalTweet .tweet"}),this.openReplyBox=function(a,b){var c=$(a.target);this.trigger(c,"uiOpenReplyDialog",b)},this.closeDialog=function(a,b){var c=this.$node.find('[data-tweet-id="'+b.sourceEventData.id+'"]');c.is(this.attr.permalinkTweetSelector)&&this.trigger("uiCloseDialog")},this.after("initialize",function(){this.on("uiReplyToTweet",this.openReplyBox),this.on(document,"dataDidDeleteTweet",this.closeDialog)})}var component=require("core/component"),ThreadedPermalinkTweet=component(threadedPermalinkTweet);module.exports=ThreadedPermalinkTweet
});
define("app/pages/threaded_permalink_overlay",["module","require","exports","app/boot/app","app/ui/timelines/conversations/descendant_timeline","app/ui/expando/expanding_tweets","app/ui/more_tweet_actions_dropdown","app/ui/multiline_ellipses","app/data/permalink_scribe","core/utils","app/data/threaded_conversations","app/ui/threaded_permalink_actions","app/ui/threaded_permalink_tweet","app/boot/timeline","app/ui/tweet_actions","app/ui/tweets","app/boot/tweets","app/ui/timelines/with_overlay_timeline","app/ui/with_permalinktweet_tweet_actions","app/ui/with_tweet_translation"],function(module, require, exports) {
var bootApp=require("app/boot/app"),DescendantTimeline=require("app/ui/timelines/conversations/descendant_timeline"),ExpandingTweets=require("app/ui/expando/expanding_tweets"),MoreTweetActionsDropdown=require("app/ui/more_tweet_actions_dropdown"),MultilineEllipses=require("app/ui/multiline_ellipses"),PermalinkScribe=require("app/data/permalink_scribe"),utils=require("core/utils"),ThreadedConversationsData=require("app/data/threaded_conversations"),ThreadedPermalinkActions=require("app/ui/threaded_permalink_actions"),ThreadedPermalinkTweet=require("app/ui/threaded_permalink_tweet"),timelineBoot=require("app/boot/timeline"),TweetActionsUI=require("app/ui/tweet_actions"),Tweets=require("app/ui/tweets"),tweetsBoot=require("app/boot/tweets"),withOverlayTimeline=require("app/ui/timelines/with_overlay_timeline"),withPermalinkTweetTweetActions=require("app/ui/with_permalinktweet_tweet_actions"),withTweetTranslation=require("app/ui/with_tweet_translation");module.exports=function(a){var b=".PermalinkOverlay",c=".ThreadedPermalinkOverlay-focalTweet .tweet",d=".ThreadedPermalinkOverlay-replies .replies-to";bootApp(a),MultilineEllipses.attachTo(b),a=utils.merge(a,{itemType:"tweet",lastItemSelector:".tweet:last",inOverlay:!0,genericItemSelector:".js-stream-tweet",useDeduping:!0,permalinkTweetSelector:c,generalTweetSelector:c,excludeConversations:!0,containingItemSelector:".ThreadedPermalinkOverlay-focalTweet,.ThreadedConversation--loneTweet .js-stream-item,.ThreadedConversation-tweet .js-stream-item",marginBreaking:!1}),tweetsBoot(b,a),ThreadedPermalinkTweet.attachTo(b),ThreadedPermalinkActions.attachTo(d,a),ThreadedConversationsData.attachTo(document),timelineBoot(utils.merge(a,{infiniteScrollNode:".ThreadedPermalinkOverlay .ThreadedPermalinkOverlay-replies",contentSelector:".replies-to",statsName:"swift_permalink_timeline"})),Tweets.attachTo(b,a),TweetActionsUI.mixin.apply(this,[withTweetTranslation,withPermalinkTweetTweetActions]).attachTo(b,a),MoreTweetActionsDropdown.attachTo(b,a),DescendantTimeline.mixin(withOverlayTimeline).attachTo(d,a)}
});